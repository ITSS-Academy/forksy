<div class="recipe-page-container">
  <!-- Top Navigation Bar -->
  <div class="top-nav-bar">
    <div class="nav-left">
      <button mat-icon-button class="back-button">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>
    <div class="nav-right">
      <button mat-button class="download-app-btn">
        <mat-icon>download</mat-icon>
        T·∫£i ·ª©ng d·ª•ng
      </button>
      <div class="profile-icon">
        <span>k</span>
      </div>
      <button mat-raised-button color="accent" class="new-recipe-btn">
        <mat-icon>add</mat-icon>
        Vi·∫øt m√≥n m·ªõi
      </button>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Left Column - Main Recipe Image -->
    <div class="left-column">
      <div class="recipe-image-container">
        <div class="image-upload-area" [class.has-image]="mainImagePreview">
          <input 
            type="file" 
            accept="image/*" 
            (change)="onMainImageSelected($event)"
            id="mainImageInput"
            class="file-input"
          >
          <label for="mainImageInput" class="upload-label">
            <div class="upload-content" *ngIf="!mainImagePreview">
              <mat-icon class="camera-icon">camera_alt</mat-icon>
              <p class="upload-text">T·∫£i l√™n h√¨nh ·∫£nh m√≥n ƒÉn</p>
            </div>
            <img *ngIf="mainImagePreview" [src]="mainImagePreview" alt="Main recipe image" class="preview-image">
          </label>
        </div>
      </div>
    </div>

    <!-- Right Column - Recipe Information -->
    <div class="right-column">
      <form [formGroup]="recipeForm" (ngSubmit)="onSubmit()" class="recipe-form">
        
        <!-- Recipe Title Section -->
        <div class="recipe-title-section">
          <mat-form-field appearance="outline" class="title-field">
            <mat-label>T√™n m√≥n ƒÉn</mat-label>
            <input matInput formControlName="title" placeholder="Th·ªãt ch·∫£ rang n∆∞·ªõc m·∫Øm">
          </mat-form-field>
          
          <div class="recipe-meta">
            <div class="cooksnap-badge">
              <mat-icon>camera_alt</mat-icon>
              <span>"M·ªü h√†ng" cooksnap cho m√≥n n√†y!</span>
            </div>
            <div class="comments-info">
              <mat-icon>chat_bubble</mat-icon>
              <span>ƒê√£ c√≥ 2 b√¨nh lu·∫≠n</span>
            </div>
            <div class="kitchen-info">
              <span class="kitchen-name">Guruji Kitchen</span>
              <div class="kitchen-badges">
                <span class="badge blue">‚óè</span>
                <span class="badge red">‚óè</span>
                <span class="badge fire">üî•</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Author Section -->
        <div class="author-section">
          <div class="author-avatar">
            <div class="avatar-placeholder">AV</div>
          </div>
          <div class="author-info">
            <div class="author-name">Annie Vo &#64;AnnieVo</div>
            <div class="author-location">TPHCM</div>
            <div class="hashtags">
              <span class="hashtag">#Cookpadapron2025</span>
              <span class="hashtag">Tu·∫ßn 3: Th·ªãt vai heo</span>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button mat-raised-button class="save-btn">
            <mat-icon>bookmark</mat-icon>
            L∆∞u M√≥n
          </button>
          <button mat-raised-button class="collection-btn">
            <mat-icon>add</mat-icon>
            Th√™m v√†o b·ªô s∆∞u t·∫≠p
          </button>
          <button mat-stroked-button class="share-btn">
            <mat-icon>share</mat-icon>
            Chia s·∫ª
          </button>
          <button mat-stroked-button class="print-btn">
            <mat-icon>print</mat-icon>
            In
          </button>
        </div>

        <!-- Ingredients Section -->
        <div class="ingredients-section">
          <h3 class="section-title">Nguy√™n Li·ªáu</h3>
          <div class="servings-info">
            <mat-icon>person</mat-icon>
            <span>3 ng∆∞·ªùi</span>
          </div>
          
          <div class="ingredients-list" formArrayName="ingredients">
            <div class="ingredient-item" *ngFor="let ingredient of ingredients.controls; let i = index" [formGroupName]="i">
              <mat-form-field appearance="outline" class="ingredient-field">
                <input 
                  matInput 
                  formControlName="name" 
                  placeholder="400 g th·ªãt vai heo"
                >
              </mat-form-field>
              <button mat-icon-button (click)="removeIngredient(i)" class="remove-btn">
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </div>
          
          <button mat-stroked-button type="button" (click)="addIngredient()" class="add-ingredient-btn">
            <mat-icon>add</mat-icon>
            Th√™m nguy√™n li·ªáu
          </button>
        </div>

        <!-- Instructions Section -->
        <div class="instructions-section">
          <h3 class="section-title">H∆∞·ªõng d·∫´n c√°ch l√†m</h3>
          <div class="cooking-time">
            <mat-icon>schedule</mat-icon>
            <span>20 ph√∫t</span>
          </div>
          
          <div class="steps-list" formArrayName="steps">
            <div class="step-item" *ngFor="let step of steps.controls; let i = index" [formGroupName]="i">
              <div class="step-header">
                <div class="step-number">{{ i + 1 }}</div>
                <mat-form-field appearance="outline" class="step-field">
                  <textarea matInput formControlName="description" placeholder="M√¥ t·∫£ b∆∞·ªõc {{ i + 1 }}" rows="3"></textarea>
                </mat-form-field>
              </div>
              
              <!-- Step Images -->
              <div class="step-images">
                <div class="step-image-upload" *ngFor="let imgIndex of [0, 1, 2]">
                  <input 
                    type="file" 
                    accept="image/*" 
                    (change)="onStepImageSelected($event, i, imgIndex)"
                    [id]="'stepImageInput' + i + '_' + imgIndex"
                    class="file-input"
                  >
                  <label [for]="'stepImageInput' + i + '_' + imgIndex" class="step-upload-label">
                    <div class="step-upload-content" *ngIf="!getStepImage(i, imgIndex)">
                      <mat-icon class="camera-icon">add_a_photo</mat-icon>
                    </div>
                    <img *ngIf="getStepImage(i, imgIndex)" [src]="getStepImage(i, imgIndex)" alt="Step image" class="step-preview-image">
                  </label>
                </div>
              </div>
              
              <button mat-icon-button (click)="removeStep(i)" class="remove-step-btn">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
          
          <button mat-stroked-button type="button" (click)="addStep()" class="add-step-btn">
            <mat-icon>add</mat-icon>
            Th√™m b∆∞·ªõc m·ªõi
          </button>
        </div>

        <!-- Submit Button -->
        <div class="submit-section">
          <button mat-raised-button color="primary" type="submit" class="submit-btn">
            <mat-icon>save</mat-icon>
            L∆∞u c√¥ng th·ª©c
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
